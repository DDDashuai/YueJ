import{u as B,a as S,r as i,c as L,d as s,b as a,w as l,e as N,f as _,h as n,o as R,i as c,j as g}from"./index-BSVfoRQN.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as T}from"./function-call-COE2xzUN.js";const $={class:"register-page"},j={class:"register-form"},D={class:"form-actions"},E={class:"agreement"},I={class:"agreement-content"},M={__name:"Register",setup(z){const v=N(),w=B(),t=S({username:"",password:"",confirmPassword:"",phone:"",verifyCode:""}),m=i(!1),p=i(!1);i(0);const r=i(!1),b=u=>u===t.password,V=()=>{v.back()},k=async()=>{if(!m.value){_("请先同意用户协议和隐私政策");return}p.value=!0;try{await w.register(t)&&T({title:"注册成功",message:"是否立即登录？",showCancelButton:!0}).then(()=>{v.push("/login")})}catch{_("注册失败")}finally{p.value=!1}},h=()=>{r.value=!0},y=()=>{};return(u,e)=>{const f=n("van-nav-bar"),d=n("van-field"),C=n("van-cell-group"),x=n("van-button"),P=n("van-checkbox"),U=n("van-form"),q=n("van-popup");return R(),L("div",$,[s(f,{title:"注册账号","left-arrow":"",onClickLeft:V}),a("div",j,[s(U,{onSubmit:k},{default:l(()=>[s(C,{inset:""},{default:l(()=>[s(d,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.username=o),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),s(d,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"},{min:6,message:"密码至少6位"}]},null,8,["modelValue"]),s(d,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>t.confirmPassword=o),type:"password",name:"confirmPassword",label:"确认密码",placeholder:"请再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:b,message:"两次密码不一致"}]},null,8,["modelValue","rules"]),s(d,{modelValue:t.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>t.phone=o),type:"tel",name:"phone",label:"手机号",placeholder:"请输入手机号（选填）",rules:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},null,8,["modelValue"])]),_:1}),a("div",D,[s(x,{round:"",block:"",type:"primary","native-type":"submit",loading:p.value},{default:l(()=>e[7]||(e[7]=[c(" 注册 ")])),_:1},8,["loading"]),a("div",E,[s(P,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),shape:"square"},{default:l(()=>[e[8]||(e[8]=c(" 我已阅读并同意 ")),a("span",{class:"link",onClick:g(h,["stop"])},"《用户协议》"),e[9]||(e[9]=c(" 和 ")),a("span",{class:"link",onClick:g(y,["stop"])},"《隐私政策》")]),_:1},8,["modelValue"])])])]),_:1})]),s(q,{show:r.value,"onUpdate:show":e[6]||(e[6]=o=>r.value=o),position:"bottom",round:"",style:{height:"70%"}},{default:l(()=>[a("div",I,[s(f,{title:"用户协议","left-arrow":"",onClickLeft:e[5]||(e[5]=o=>r.value=!1)}),e[10]||(e[10]=a("div",{class:"agreement-text"},null,-1))])]),_:1},8,["show"])])}}},J=A(M,[["__scopeId","data-v-9acbe6d7"]]);export{J as default};
