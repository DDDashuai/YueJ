import{r as g,O as h,Q as B,V as o,R as i,w as t,a8 as _,a9 as f,u as L,s as p,a as n,b as N,W as d,a2 as $}from"./vendor-BBsPRJ_E.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"forgot-password-page"},R={class:"step-indicator"},T={class:"form-container"},z={class:"form-actions"},E={class:"form-container"},O={class:"form-actions"},Q={class:"success-container"},W={__name:"ForgotPassword",setup(j){const y=L(),a=g(0),u=g(0),s=h({phone:"",verifyCode:"",newPassword:"",confirmPassword:""}),V=r=>r===s.newPassword,C=()=>{a.value>0?a.value--:y.back()},P=async()=>{if(!/^1[3-9]\d{9}$/.test(s.phone)){p("请输入正确的手机号");return}try{u.value=60;const r=setInterval(()=>{u.value--,u.value<=0&&clearInterval(r)},1e3)}catch{p("验证码发送失败")}},k=async()=>{try{a.value=1}catch{p("验证失败")}},x=async()=>{try{a.value=2}catch{p("密码重置失败")}},S=()=>{y.replace("/login")};return(r,e)=>{const q=n("van-nav-bar"),v=n("van-step"),I=n("van-steps"),c=n("van-field"),m=n("van-button"),b=n("van-cell-group"),w=n("van-form"),U=n("van-empty");return N(),B("div",F,[o(q,{title:"找回密码","left-arrow":"",onClickLeft:C}),i("div",R,[o(I,{active:a.value},{default:t(()=>[o(v,null,{default:t(()=>e[4]||(e[4]=[d("验证身份")])),_:1}),o(v,null,{default:t(()=>e[5]||(e[5]=[d("重置密码")])),_:1}),o(v,null,{default:t(()=>e[6]||(e[6]=[d("完成")])),_:1})]),_:1},8,["active"])]),_(i("div",T,[o(w,{onSubmit:k},{default:t(()=>[o(b,{inset:""},{default:t(()=>[o(c,{modelValue:s.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>s.phone=l),type:"tel",label:"手机号",placeholder:"请输入注册手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},null,8,["modelValue"]),o(c,{modelValue:s.verifyCode,"onUpdate:modelValue":e[1]||(e[1]=l=>s.verifyCode=l),center:"",clearable:"",label:"验证码",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:t(()=>[o(m,{size:"small",type:"primary",disabled:!!u.value,onClick:P},{default:t(()=>[d($(u.value?`${u.value}s后重试`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),i("div",z,[o(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>e[7]||(e[7]=[d(" 下一步 ")])),_:1})])]),_:1})],512),[[f,a.value===0]]),_(i("div",E,[o(w,{onSubmit:x},{default:t(()=>[o(b,{inset:""},{default:t(()=>[o(c,{modelValue:s.newPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>s.newPassword=l),type:"password",label:"新密码",placeholder:"请输入新密码",rules:[{required:!0,message:"请填写新密码"},{min:6,message:"密码至少6位"}]},null,8,["modelValue"]),o(c,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>s.confirmPassword=l),type:"password",label:"确认密码",placeholder:"请再次输入新密码",rules:[{required:!0,message:"请确认密码"},{validator:V,message:"两次密码不一致"}]},null,8,["modelValue","rules"])]),_:1}),i("div",O,[o(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>e[8]||(e[8]=[d(" 确认修改 ")])),_:1})])]),_:1})],512),[[f,a.value===1]]),_(i("div",Q,[o(U,{image:"success",description:"密码重置成功"},{bottom:t(()=>[o(m,{round:"",type:"primary",class:"bottom-button",onClick:S},{default:t(()=>e[9]||(e[9]=[d(" 立即登录 ")])),_:1})]),_:1})],512),[[f,a.value===2]])])}}},H=D(W,[["__scopeId","data-v-baba88a9"]]);export{H as default};
