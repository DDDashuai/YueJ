const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Login-7R-rjpGH.js","js/vendor-BBsPRJ_E.js","js/_plugin-vue_export-helper-DlAUqK2U.js","js/utils-DXsv3KKR.js","css/Login-CTFJVSYT.css","js/Layout-DK_Kj-mG.js","css/Layout-BLmk16KO.css","js/Home-BeDyxg5h.js","js/medicine-BsLF5ycu.js","js/health-DWWe7pBk.js","js/chat-Cqxs3pXi.js","js/date-mP0Ysl1n.js","js/AvatarLetter-UhON8Et9.js","css/AvatarLetter-BT4FWbmy.css","css/Home-Ysai0cA8.css","js/Register-CALsr181.js","css/Register-c5jUUrTX.css","js/ForgotPassword-ajxQDAeq.js","css/ForgotPassword-Birfo6xz.css","js/Chat-BX1sZb_T.js","css/Chat-c5ZaGBZx.css","js/Health-BzfnTsaH.js","css/Health-DuG778jc.css","js/MedicineReminder-U-h7oC1A.js","css/MedicineReminder-DFPLl4Z8.css","js/Profile-DIgPzYrJ.js","css/Profile-CWFaoBwB.css"])))=>i.map(i=>d[i]);
import{s as E,d as I,r as P,u as S,o as T,a as R,b as y,c as w,w as C,K as D,e as O,f as q,g as U,h as x,i as V,B,F as j,j as H,C as F,N,T as $,k as G,I as J,l as K,L as M,m as z,n as W,E as Y,p as Q,P as X,D as Z,q as ee,t as te,v as re,x as oe,S as ne,y as se,z as ae,A as ie,U as ce,G as ue,H as le,J as pe,M as me}from"./vendor-BBsPRJ_E.js";import{a as he}from"./utils-DXsv3KKR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const d=document.createElement("canvas");d.width=32;d.height=32;const f=d.getContext("2d");f.beginPath();f.arc(16,16,16,0,Math.PI*2);f.fillStyle="#1989fa";f.fill();const de=d.toDataURL(),_=document.createElement("link");_.type="image/x-icon";_.rel="shortcut icon";_.href=de;document.head.appendChild(_);const h=he.create({baseURL:"http://localhost:8080",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});h.interceptors.request.use(t=>{const e=g();return e.token&&(t.headers.Authorization=`Bearer ${e.token}`),t.method!=="options"&&(t.headers["Content-Type"]="application/json"),t},t=>Promise.reject(t));h.interceptors.response.use(t=>{const e=t.data;return e.code!==200?(E(e.message||"请求失败"),Promise.reject(new Error(e.message||"请求失败"))):e.data},t=>{var e,a,i;return((e=t.response)==null?void 0:e.status)===401&&(g().logout(),window.location.href="/login"),E(((i=(a=t.response)==null?void 0:a.data)==null?void 0:i.message)||t.message||"请求失败"),Promise.reject(t)});const g=I("user",()=>{const t=P(null),e=P(""),a=async(r,c)=>{try{if(!r||!c)throw new Error("用户名和密码不能为空");const l=await h.post("/api/user/login",{username:r,password:c});return l.user&&l.token?(t.value=l.user,e.value=l.token,localStorage.setItem("token",l.token),!0):!1}catch(l){throw console.error("登录失败:",l),l}},i=async r=>{try{if(!r.username||!r.password)throw new Error("用户名和密码不能为空");const c={username:r.username,password:r.password};return r.email&&(c.email=r.email),r.phone&&(c.phone=r.phone),await h.post("/api/user/register",c),!0}catch{return!1}},o=async()=>{try{const r=await h.get("/api/user/info");return t.value=r,!0}catch{return!1}};return{user:t,token:e,login:a,register:i,getUserInfo:o,updateUserInfo:async r=>{try{return await h.put("/api/user/info",r),!0}catch{return!1}},logout:()=>{t.value=null,e.value="",localStorage.removeItem("token")},checkAuth:async()=>{const r=localStorage.getItem("token");return r&&!e.value?(e.value=r,await o()):!!e.value}}}),fe={__name:"App",setup(t){const e=S(),a=g();return T(async()=>{const i=await a.checkAuth();!i&&e.currentRoute.value.path!=="/login"?e.push("/login"):i&&e.currentRoute.value.path==="/"&&e.push("/home")}),(i,o)=>{const s=R("router-view");return y(),w(s,null,{default:C(({Component:n})=>[(y(),w(D,null,[(y(),w(O(n)))],1024))]),_:1})}}},_e="modulepreload",ge=function(t){return"/YueJ/"+t},A={},p=function(e,a,i){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),u=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(a.map(r=>{if(r=ge(r),r in A)return;A[r]=!0;const c=r.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":_e,c||(m.as="script"),m.crossOrigin="",m.href=r,u&&m.setAttribute("nonce",u),document.head.appendChild(m),c)return new Promise((b,k)=>{m.addEventListener("load",b),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${r}`)))})}))}function s(n){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=n,window.dispatchEvent(u),!u.defaultPrevented)throw n}return o.then(n=>{for(const u of n||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},ve=()=>p(()=>import("./Login-7R-rjpGH.js"),__vite__mapDeps([0,1,2,3,4])),ye=()=>p(()=>import("./Layout-DK_Kj-mG.js"),__vite__mapDeps([5,1,2,6])),we=()=>p(()=>import("./Home-BeDyxg5h.js"),__vite__mapDeps([7,1,8,9,10,11,12,2,13,3,14])),Ee=[{path:"/login",name:"Login",component:ve},{path:"/register",name:"Register",component:()=>p(()=>import("./Register-CALsr181.js"),__vite__mapDeps([15,1,2,3,16]))},{path:"/forgot-password",name:"ForgotPassword",component:()=>p(()=>import("./ForgotPassword-ajxQDAeq.js"),__vite__mapDeps([17,1,2,18]))},{path:"/",component:ye,redirect:"/home",children:[{path:"home",name:"Home",component:we,meta:{requiresAuth:!0}},{path:"chat",name:"Chat",component:()=>p(()=>import("./Chat-BX1sZb_T.js"),__vite__mapDeps([19,10,1,11,12,2,13,3,20])),meta:{requiresAuth:!0}},{path:"health",name:"Health",component:()=>p(()=>import("./Health-BzfnTsaH.js"),__vite__mapDeps([21,9,1,11,2,3,22])),meta:{requiresAuth:!0}},{path:"medicine",name:"Medicine",component:()=>p(()=>import("./MedicineReminder-U-h7oC1A.js"),__vite__mapDeps([23,1,8,2,3,24])),meta:{requiresAuth:!0}},{path:"profile",name:"Profile",component:()=>p(()=>import("./Profile-DIgPzYrJ.js"),__vite__mapDeps([25,1,9,8,12,2,13,3,26])),meta:{requiresAuth:!0}}]}],L=q({history:U(),routes:Ee});L.beforeEach(async(t,e,a)=>{console.log("Route change:",{from:e.path,to:t.path});const i=g();if(t.meta.requiresAuth&&!await i.checkAuth()){a("/login");return}a()});const Pe="/YueJ/";window.__dynamic_base__=Pe;const v=x(fe),Ae=V();v.use(Ae);v.use(L);const Le=[B,j,H,F,N,$,G,J,K,M,z,W,Y,Q,X,Z,ee,te,re,oe,ne,se,ae,ie,ce,ue,le,pe,me];Le.forEach(t=>{v.component(t.name,t)});v.mount("#app");export{h as r,g as u};
