import{d as h,r as n}from"./vendor-BBsPRJ_E.js";import{u,r as a}from"./index-CfC59-8V.js";const g=h("health",()=>{const o=u(),s=n(null),l=n([]);return{healthData:s,healthHistory:l,addHealthData:async r=>{var e;try{if(!((e=o.user)!=null&&e.userId))throw new Error("用户未登录");const t={...r,userId:o.user.userId},c=await a.post("/api/health",t);return t.value=c,!0}catch(t){return console.error("添加健康数据失败:",t),!1}},getLatestHealth:async r=>{try{if(!r)throw new Error("用户ID不能为空");const e=await a.get(`/api/health/latest/${r}`);return e&&(s.value=e,console.log("最新健康数据:",e)),!0}catch(e){return console.error("获取最新健康数据失败:",e),!1}},getHealthHistory:async r=>{try{if(!r)throw new Error("用户ID不能为空");const e=await a.get(`/api/health/user/${r}`);return e&&(l.value=e,console.log("健康记录历史:",e)),!0}catch(e){return console.error("获取健康记录失败:",e),!1}},deleteHealthRecord:async r=>{try{if(!r)throw new Error("记录ID不能为空");return await a.delete(`/api/health/${r}`),console.log("删除健康记录:",r),!0}catch(e){return console.error("删除健康记录失败:",e),!1}}}});export{g as u};
