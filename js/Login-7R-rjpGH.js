import{u as y,r as k,O as V,a as t,b as x,Q as C,R as e,V as o,w as n,W as S,X as T,s as m,Y as B}from"./vendor-BBsPRJ_E.js";import{u as L}from"./index-CfC59-8V.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-DXsv3KKR.js";const R={class:"login-page"},U={class:"login-form"},h={class:"form-actions"},q={__name:"Login",setup(E){const l=y(),p=L(),r=k(!1),a=V({username:"",password:""}),f=async()=>{r.value=!0,T({message:"登录中...",forbidClick:!0});try{await p.login(a.username,a.password)?(m({type:"success",message:"登录成功"}),await l.push("/")):m({type:"fail",message:"用户名或密码错误"})}catch(i){m({type:"fail",message:i.message||"登录失败，请稍后重试"})}finally{r.value=!1,B()}},g=()=>{l.push("/register")},v=()=>{l.push("/forgot-password")};return(i,s)=>{const u=t("van-icon"),c=t("van-field"),_=t("van-cell-group"),w=t("van-button"),b=t("van-form");return x(),C("div",R,[s[6]||(s[6]=e("div",{class:"login-header"},[e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),e("h2",{class:"title"},"老年人健康管理平台")],-1)),e("div",U,[o(b,{onSubmit:f,class:"form-content"},{default:n(()=>[o(_,{inset:""},{default:n(()=>[o(c,{modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=d=>a.username=d),name:"username",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},{label:n(()=>[o(u,{name:"user-o",class:"field-icon"}),s[2]||(s[2]=e("span",{class:"field-label"},"用户名",-1))]),_:1},8,["modelValue"]),o(c,{modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=d=>a.password=d),type:"password",name:"password",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},{label:n(()=>[o(u,{name:"lock",class:"field-icon"}),s[3]||(s[3]=e("span",{class:"field-label"},"密码",-1))]),_:1},8,["modelValue"])]),_:1}),e("div",h,[o(w,{round:"",block:"",type:"primary","native-type":"submit",loading:r.value},{default:n(()=>s[4]||(s[4]=[S(" 登录 ")])),_:1},8,["loading"]),e("div",{class:"action-links"},[e("span",{class:"link",onClick:g},"注册账号"),s[5]||(s[5]=e("span",{class:"divider"},"|",-1)),e("span",{class:"link",onClick:v},"忘记密码")])])]),_:1})]),s[7]||(s[7]=e("div",{class:"login-footer"},[e("p",{class:"copyright"},"© 2024 健康管理平台 版权所有")],-1))])}}},Q=N(q,[["__scopeId","data-v-0d317b9d"]]);export{Q as default};
